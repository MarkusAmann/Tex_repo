\chapter{Einleitung}\label{cha:Einleitung}
In der Schnelllebigkeit der heutigen Gesellschaft stellt das \gls{AD} ein Thema dar, welches seit Jahren einen festen Platz im gesellschaftlichen Diskurs in unterschiedlichen Bereichen einnimmt. Neben der technischen Weiterentwicklung werden auch rechtliche, ethische, ökonomische und ökologische Aspekte intensiv hinsichtlich möglicher Chancen und eventueller Risiken diskutiert. Gerade in der gegenwärtigen Debatte um den Klimawandel sehen mehrere Studien in der Weiterentwicklung autonomer Fahrzeuge das Potential zur Reduktion von klimaschädlichen Emissionen durch den Verkehrssektor \cite{Brost.2020,MichaelKrail.2019,Lee.2019}. Durch eine energieoptimierte Fahrweise und die effiziente Nutzung automatisierter Fahrzeuge, können enorme Energie- und Treibhausgaseinsparungen erzielt werden \cite{MichaelKrail.2019}. Damit das Potential zur Energie- und Emissionsreduktion jedoch ausgeschöpft werden kann, muss das \gls{AD} im richtigen Rahmen eingesetzt werden. Sekundäre Effekte wie erhöhtes Verkehrsaufkommen durch die zusätzliche Attraktivität privater Einzelnutzung automatisierter Fahrzeuge oder eine hohe Zahl von Leerfahrten können auch negativen Einfluss auf die Energiebilanz des Verkehrs- und Transportsektors haben \cite{MichaelKrail.2019,AgoraVerkehrswende.082020}. Solche Effekte gilt es unbedingt zu vermeiden, weshalb politische und gesellschaftliche Rahmenbedingungen mit Fokus auf die nachhaltige Nutzung für die Einführung automatisierter Fahrzeuge unerlässlich sind -- der technologische Fortschritt alleine wird darüber nicht entscheiden können \cite{AgoraVerkehrswende.082020}. Weiteres Verbesserungspotential bietet das \gls{AD} zudem im Bereich der Verkehrssicherheit. Trotz all der Sensorik und der Vielzahl an \gls{FAS}, die heutzutage in Fahrzeugen verbaut werden, ist der Mensch als fahrzeugführende Person immer noch der Hauptgrund für Unfälle im Straßenverkehr. Während insgesamt \valunit{88}{\%} aller Unfälle ihre Ursache in menschlichem Fehlverhalten haben, beträgt der Einfluss technischer Mängel gerade Mal \valunit{1}{\%}. Dies zeigen Zahlen des statistischen Bundesamts aus dem Jahre 2017 \cite{StatistischesBundesamt.2017}. Daher bietet das \gls{AD} das Potential zur Steigerung an Verkehrssicherheit und Reduktion der Unfallzahlen, sowohl im innerstädtischen Bereich, als auch auf Autobahnen. 

Neben dem Sicherheitsaspekt bei der Entwicklung automatisierter Fahrzeuge, kommt dem Fahrkomfort eine besondere Bedeutung zu. Gegenüber der Personen geführten Fahrt, steigt die Notwendigkeit einen hohen Fahrkomfort zu erreichen beim \gls{AD} sogar noch an. Das gesteigerte Komfortbedürfnis kann damit begründet werden, dass beim \gls{AD} zunehmend fahrfremde Tätigkeiten ausgeübt werden können. Unter fahrfremden Tätigkeiten werden solche Aktivitäten verstanden, die über die Navigation, das Führen und die Stabilisierung des Fahrzeugs sowie die Überwachung des Umfeld und des umgebenden Verkehrs hinausgehen \cite{Festner.2019}. Als Beispiel können Tätigkeiten wie Essen und Trinken, das Lesen von Zeitschriften oder Büchern, das Arbeiten und Beantworten von Nachrichten am Laptop oder Smartphone oder auch das Schlafen genannt werden. Gemäß der SAE-Klassifizierung \cite{SAETaxonomy.2018} unterschiedlicher Stufen von Automatisierung im Fahrzeug, ist spätestens ab Level 3 davon auszugehen, dass zumindest zeitweise fahrfremde Tätigkeiten ausgeübt werden können \cite{Festner.2019}. Ab diesem Level muss die fahrzeugführende Person zwar noch als Rückfallebene jederzeit dazu bereit sein, die Kontrolle über das Fahrzeug zu übernehmen. Im \glqq normalen\grqq~Anwendungsfall hingegen obliegen die Fahrzeugführung sowie die Verkehrs- und Umfeldüberwachung dem System \cite{SAETaxonomy.2018}. Mögliche Einschränkungen, die bei Level 3 für die fahrfremden Tätigkeiten gelten, nehmen mit zunehmendem Grad an Automatisierung ab \cite{Festner.2019}. Das Ausüben von fahrfremden Tätigkeiten begünstigt dabei das Auftreten von Kinetose, auch bekannt als Reisekrankheit, was einerseits an einem Sensorkonflikt zwischen der visuellen Information des Auges und der vestibulären Sensorinformation des Gleichgewichtsorgans liegt \cite{Reason.1975,Golding.2006,Benson.2002}. Andererseits wird die Kontrolle über das Fahrzeug und dessen Verhalten mit steigender Automatisierung zunehmend an das System übergeben, wodurch Fahrzeugbewegungen von den Insassen nicht kontrolliert und dadurch weniger genau prädiziert werden können, was wiederum das Auftreten von Kinetose \cite{Rolnick.1991} begünstigt. Vor diesem Hintergrund ist die Berücksichtigung des Fahrkomforts bei der Planung optimaler Fahrzeugtrajektorien für die Weiterentwicklung des \gls{AD} unabdingbar. Wenngleich die Manöver- und Trajektorienplanung nur einen Teil der gesamten Systemkette eines automatisierten Fahrzeugs darstellt, ist dieser doch elementar für das Erzielen eines hohen Fahrkomforts, da in diesem Block maßgeblich die optimalen Zustands- und Stellgrößentrajektorien geplant werden. 

In der Literatur existieren verschiedene Herangehensweisen, die Trajektorienplanung für das \gls{AD} umzusetzen. Alle Ansätze haben gemein, dass das Planungsproblem zunächst mithilfe mathematischer Formulierungen durch ein \gls{OP} ausgedrückt wird. Dieses besteht aus einer Gütefunktion oder einem Gütefunktional, welches der Minimierung von unterschiedlichen Gütekriterien dient, sowie Nebenbedingungen, durch die die Beschreibung der Systemdynamik, Randwerte und Beschränkungsanforderungen an die Zustände und Eingangsgrößen berücksichtigt werden können. Davon ausgehend bieten sich mehrere Möglichkeiten zur Lösung des \gls{OP}. In \cite{shi} und \cite{guo} wird eine \gls{MPC} für die Planung optimaler Fahrzeugtrajektorien verwendet. Bei der Anwendung von \gls{MPC} wird das Optimalsteuerungsproblem durch Rückführung des Fahrzeugzustands wiederholt gelöst. Dabei wird ein (meist lineares) Modell verwendet, welches dazu dient, das Fahrzeugverhalten über einen gewissen Prädiktionshorizont vorherzusagen. Diese Herangehensweise kann sowohl zur Planung der optimalen Fahrzeugtrajektorien, als auch zur Fahrzeugstabilisierung verwendet werden. Vorteil von \gls{MPC} ist, dass Zustandsbeschränkungen zur Kollisionsvermeidung, oder um zu verhindern, dass das Fahrzeug Fahrbahnbegrenzungen verletzt, vergleichsweise einfach berücksichtigt werden können. Ein entscheidender Nachteil beim Einsatz von \gls{MPC} liegt darin, dass die zyklische Lösung des Optimalsteuerungsproblems zu einem enormen Rechenaufwand führen kann. Zudem wird nach jedem Planungsschritt immer nur der erste Wert der optimalen Lösung tatsächlich verwendet, sodass je nach Länge des Prädiktionshorizonts nicht nur der Rechenaufwand stark ansteigt, sondern gleichzeitig ein Großteil der erhaltenen Lösung effektiv gar nicht verwendet wird.  

In \cite{Christ.2021} wird das \gls{OP} zur Erzeugung zeitoptimaler Trajektorien für ein Rennfahrzeug mithilfe eines direkten Kollokationsverfahrens gelöst, bei dem das \gls{OP} zunächst auf einem feinen, äquidistanten Gitter diskretisiert wird. Die Trajektorien der Stellgrößen werden anschließend auf jedem Teilintervall des Gitter als stückweise konstant angenommen, während die Trajektorien der Zustände auf jedem Teilintervall durch Polynome 3. Ordnung approximiert werden. Die Übereinstimmung der optimalen Trajektorien mit den Polynomen wird an sogenannten Kollokationspunkten überprüft. Zusätzlich werden Stetigkeitsbedingungen eingeführt, die einen kontinuierlichen Übergang zwischen den Polynomen an den Intervallgrenzen ermöglichen. Bei der Anwendung direkter Lösungsverfahren wird das \gls{OP} immer zunächst an zahlreichen Stützstellen diskretisiert und anschließend mithilfe eines numerischen Verfahrens gelöst. Vorteile dieser Vorgehensweise liegen darin, dass sich direkte Verfahren vielseitig und generisch einsetzen lassen und dabei eine hohe Robustheit besitzen. Zudem lassen sich Zustands- oder Pfadbegrenzungen leicht realisieren. Auf der anderen Seite ergeben sich durch die Diskretisierung Probleme mit einer großen Anzahl an Variablen, die sich im Rechenaufwand niederschlagen. 

Dementgegen stehen indirekte Lösungsverfahren, bei denen das \gls{OP} anstelle der Diskretisierung mithilfe der Variationsrechnung in ein \gls{ZPR} für ein System aus \gls{DGL} erster Ordnung überführt wird. Die Herangehensweise durch indirekte Verfahren bietet den Vorteil Lösungen sehr hoher Genauigkeit und zudem Einsicht in die Struktur der optimalen Trajektorien zu erhalten. Diese Vorgehensweise wird in \cite{Rathgeber.2016} gewählt. Dabei werden zunächst die Längs- und Querbewegung des Fahrzeugs getrennt betrachtet und unter Berücksichtigung gewählter Optimierungskriterien (Ruckänderung und Zeit) wird jeweils ein Gütefunktional mithilfe der Variationsrechnung minimiert, aus dem sich als Lösung die optimalen Stellgrößen- und Zustandstrajektorien für die Längs- und Querrichtung des Fahrzeugs bestimmen lassen. Diese Optimierung wird für mehrere Sets von Zielzuständen und Endzeitpunkten durchgeführt und alle Ergebnisse der Längsrichtung mit den Ergebnissen der Querrichtung kombiniert, sodass sich eine Schar von Trajektorien ergibt. Aus dieser Schar wird die beste Kombination im Sinne der Gütekriterien ausgewählt und als optimale Lösung betrachtet. Dabei werden die Trajektorien der Schar zusätzlich auf das Einhalten von Restriktionen wie Aktor- oder Fahrdynamikbegrenzungen überprüft und unzulässige Lösungen ausgeschlossen. Aus der getrennten Betrachtung von Quer- und Längsdynamik sowie der Optimierung bezüglich der Ruckänderung, resultiert ein Lösungsraum, der aus Polynomen besteht. Vorteil dieser Herangehensweise ist, dass sich damit ein echtzeitfähiger Planungsalgorithmus entwickeln lässt, wie \cite{Rathgeber.2016} zeigt. Allerdings unterliegt die Vorgehensweise der Annahme, dass Längs- und Querbewegung getrennt voneinander betrachtet werden können, wodurch die Ergebnisse weniger genau sind im Vergleich zur gekoppelten Betrachtung. 

Ein ähnliches Planungskonzept wird in \cite{Werling.2011} vorgestellt. Die Trajektorienplanung wird dabei als Teil einer neuartigen Bi-Level-Stabilisierung betrachtet, welche aus zwei Regelungen auf unterschiedlichen Ebenen besteht. Durch rekursive Trajektorienplanung in Abhängigkeit des Fahrzeugzustands werden die optimalen Steuergrößen geliefert, ohne dabei eine Regeldifferenz zu bilden. Diese Art der Vorsteuerung wird als High-Level-Stabilisierung bezeichnet und hat den Vorteil, dass auf impulsförmige Störungen durch Planung einer neuen Trajektorie reagiert wird, bei der weiterhin die Minimierung komfortrelevanter Kriterien im Fokus steht \cite{Werling.2011}. Auf der darunter liegenden Ebene wird die sogenannte Low-Level-Stabilisierung durchgeführt. Dabei werden die aus der Planung resultierenden optimalen Trajektorien mit dem Fahrzeugzustand bei einem für Regelungen üblichen Soll-/Istwert Vergleich zusammengeführt. Vorteil der unterlagerten Low-Level-Stabilisierung ist, dass permanente Störungen sowie Modellfehler ausgeglichen werden können \cite{Werling.2011}. Durch die Verknüpfung beider Stabilisierungsstrategien zur Bi-Level-Stabilisierung, lassen sich die Vorteile beider Einzelstrategien ausnutzen.   

Das \gls{AD}-Planungsproblem wird in der vorliegenden Arbeit unter Anwendung der Variationsrechnung mit besonderem Fokus auf den Fahrkomfort gelöst. Zunächst wird der Begriff Fahrkomfort erörtert und in den Kontext des \gls{AD} eingeordnet. Im Zuge dessen werden relevante Komfortkriterien mithilfe von Literaturquellen herausgearbeitet und diskutiert und es werden einige Richtwerte für die entsprechenden Komfortkriterien angegeben. Anschließend wird eine Einführung in die mathematischen Grundlagen der dynamischen Optimierung und speziell in die Variationsrechnung gegeben. Zudem werden einige Methoden als Erweiterung des \glqq klassischen\grqq~dynamischen \gls{OP} vorgestellt, die für die Lösung verschiedener Fahrszenarien benötigt werden. Als Abschluss dieses Kapitels werden mehrere indirekte Lösungsverfahren miteinander vergleichen und hinsichtlich ihrer Anwendbarkeit zur Lösung des \gls{AD}-Planungsproblems diskutiert. Danach wird ein Modell zur Beschreibung der Fahrzeugbewegung entlang einer vorgegebenen Referenzkurve in Frenet-Koordinaten hergeleitet. Schließlich werden einige selbst gewählte Fahrszenarien mithilfe der vorgestellten Methoden eingehend analysiert und unter dem Aspekt des Fahrkomforts interpretiert. Als Abschluss werden die gesammelten Ergebnisse zusammengefasst und ein Ausblick für weitere Forschung zu diesem Thema gegeben. 

\textbf{Hinweis:} In dieser Arbeit werden die Begriffe Stellgröße, Eingangsgröße und Steuergröße synonym verwendet und die abwechselnde Verwendung dieser dient ausschließlich der besseren Lesbarkeit. 


%die idealerweise eins zu eins von der Fahrzeugregelung umgesetzt werden. Das Blockschaltbild in Abbildung \ref{fig:Blockschaltbild_Fahrzeug} soll dazu die gesamte Systemkette von der Streckenplanung auf der Navigationsebene über die eigentliche Trajektorien- und Manöverplanung auf der Bahnführungsebene über die Fahrzeugregelung auf der Stabilisierungsebene bis hin zur Fahrzeugdynamik und äußeren Einflüssen durch die Umwelt und den umliegenden Verkehr schematisch darstellen. Die rote Umrandung hebt den für die Trajektorienplanung und die Generierung der optimalen Zustands- und Stellgrößentrajektorien $\ve{x}^*$ und $\ve{u}^*$ verantwortlichen Teil hervor. Das Modell ist dabei in seiner Struktur und in der Verwendung der Begrifflichkeiten an das Drei-Ebenen-Modell nach Donges angelehnt \cite{Donges}. 

%\begin{figure}[h]
%\centering
%\begin{tikzpicture}[auto, node distance=2cm,>=latex']
%\node [block, name=StrPlanung, align=left] {\textbf{Strategische Planung}\\ Navigation/Ortung};
%\node [block, above of=StrPlanung, name=Verkehr, node distance=2cm, align=left] {\textbf{Straßennetz}\\ Fahrtroute};
%\node [block, right of=StrPlanung, name=TaktPlanung, node distance=4.5cm, align=left] {\textbf{Taktische Planung}\\ Manöver/Trajektorien};
%\node [block, above of=TaktPlanung, name=Umfelderfassung, node distance=2cm, align=left] {\textbf{Umfelderfassung}\\ Verkehrsgeschehen};
%\node [block, right of=TaktPlanung, name=Regelung, node distance=4cm, align=left] {\textbf{Regelung}};
%\node [block, right of=Regelung, name=Aktorik, node distance=2.5cm, align=left] {\textbf{Aktorik}};
%\node [block, right of=Aktorik, name=Fahrzeug, node distance=3cm, align=left] {\textbf{Fahrzeugdynamik}};
%\node [block, below of=Fahrzeug, name=Messung, node distance=2cm, align=left] {\textbf{Messung/Schätzung}};
%
%\draw [to] (StrPlanung) -- (TaktPlanung);
%\draw [to] (TaktPlanung) -- node[name=uopt] {$\ve{u}^*$} node[name=xopt, below] {$\ve{x}^*$} (Regelung);
%\draw [to] (Regelung) -- node[name=u] {$\ve{u}$} (Aktorik);
%\draw [to] (Aktorik) -- (Fahrzeug);
%\draw [to] (Fahrzeug) -- node[name=x] {$\ve{x}$} (Messung);
%\draw [to] (Messung) -| (TaktPlanung);
%\draw [to] (Messung) -| node[below of=Regelung, node distance=0.3cm, name=xhat] {$\hat{\ve{x}}$} (Regelung);
%\draw [to] (Verkehr) -- (StrPlanung);
%\draw [to] (Umfelderfassung) -- (TaktPlanung);
%\draw[red,thick] ($(TaktPlanung.north west)+(-0.3,0.3)$)  rectangle ($(TaktPlanung.south east)+(0.8,-0.3)$);
%%\begin{pgfonlayer}{background}
%%\filldraw [line width=4mm,join=round,black!10] ($(Verkehr.north west)+(-0.1,0.6)$)  rectangle ($(Umfelderfassung.south east)+(0.1,-0.3)$);
%%\filldraw [line width=4mm,join=round,black!10] ($(StrPlanung.north west)+(-0.1,0.3)$)  rectangle ($(StrPlanung.south east)+(0.1,-0.6)$);
%%\filldraw [line width=4mm,join=round,black!10] ($(TaktPlanung.north west)+(-0.1,0.3)$)  rectangle ($(TaktPlanung.south east)+(0.1,-0.6)$);
%%\filldraw [line width=4mm,join=round,black!10] ($(Regelung.north west)+(-0.1,0.3)$)  rectangle ($(Regelung.south east)+(0.1,-0.6)$);
%%\filldraw [line width=4mm,join=round,black!10] ($(Aktorik.north west)+(-0.1,0.3)$)  rectangle ($(Messung.south east)+(0.1,-0.6)$);
%%\end{pgfonlayer}
%\end{tikzpicture}
%\caption{Blockschaltbild der gesamten Systemkette eines automatisierten Fahrzeugs in Anlehnung an das Drei-Ebenen-Modell nach Donges \cite{Donges}.}
%\label{fig:Blockschaltbild_Fahrzeug}
%\end{figure}

